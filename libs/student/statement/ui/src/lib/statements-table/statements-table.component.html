<table tuiTable [columns]="columnProperties" class="table" size="l">
  <thead>
    <tr tuiThGroup>
      @for (column of columns; track column.property) {
        <th *tuiHead="column.property" tuiTh [sorter]="column.sorter">
          {{ column.title }}
        </th>
      }
    </tr>
  </thead>

  <tbody
    *tuiLet="(statements$ | async) || [] | tuiTableSort as sortedStatements"
    tuiTbody
    heading="05.05.2024"
    [data]="sortedStatements"
  >
    @for (statement of sortedStatements; track statement.id) {
      <tr tuiTr>
        @for (column of columns; track column.property) {
          <td *tuiCell="column.property" tuiTd>
            <ng-container
              *ngTemplateOutlet="
                column | tuiMapper: getColumnTemplate;
                context: { $implicit: statement, index: $index }
              "
            ></ng-container>
          </td>
        }
      </tr>
    }
  </tbody>

  <tbody
    *tuiLet="(statements$ | async) || [] | tuiTableSort as sortedStatements"
    tuiTbody
    heading="05.05.2024"
    [data]="sortedStatements"
  >
    @for (statement of sortedStatements; track statement.id) {
      <tr tuiTr>
        @for (column of columns; track column.property) {
          <td *tuiCell="column.property" tuiTd>
            <ng-container
              *ngTemplateOutlet="
                column | tuiMapper: getColumnTemplate;
                context: { $implicit: statement, index: $index }
              "
            ></ng-container>
          </td>
        }
      </tr>
    }
  </tbody>
</table>

<ng-template dpTableColumn="type" let-statement let-index="index">
  {{ statement.type }}
</ng-template>

<ng-template dpTableColumn="date" let-statement>
  {{ statement.date }}
</ng-template>

<ng-template dpTableColumn="status" let-statement>
  <div class="status" [class]="statement | tuiMapper: getStatusClassName">
    {{ statement.status }}
  </div>
</ng-template>

<ng-template dpTableColumn="actions" let-statement>
  <button
    tuiIconButton
    appearance="flat"
    iconLeft="tuiIconMessageCircle"
    size="s"
    type="button"
    class="tui-space_right-1"
  ></button>

  @if (statement | tuiMapper: canCreateEmploymentStatement) {
    <button
      tuiIconButton
      appearance="flat"
      iconLeft="tuiIconPaperclip"
      size="s"
      type="button"
      class="tui-space_right-1"
      tuiHint="Создать заявление о трудоустройстве"
    ></button>
  }
</ng-template>
